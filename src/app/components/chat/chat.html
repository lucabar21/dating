<div
  class="chat-wrapper"
  #chatComponent
  [style.visibility]="chatVisible() ? 'visible' : 'hidden'"
>
  <div
    class="message-box"
    *ngFor="let message of messages()"
    [ngClass]="message.mittenteId === currentUser()?.id ? 'sent' : 'received'"
  >
    <p>{{ message.contenuto }}</p>
    <span class="timestamp">{{ message.timestamp | date: 'short' }}</span>
  </div>

  <!-- âœ… New message scroll-to-bottom button -->
  <button
    *ngIf="showScrollButton()"
    class="scroll-to-bottom"
    (click)="scrollToBottom(); showScrollButton.set(false); newMessageCount.set(0)"
  >
    <svg
      width="800px"
      height="800px"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M12 6V18M12 18L7 13M12 18L17 13"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
    </svg>
    <span class="badge" *ngIf="newMessageCount() > 0"
      >{{ newMessageCount() }}</span
    >
  </button>
</div>
